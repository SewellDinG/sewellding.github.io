---
layout: post
title: zip 相关杂项利用总结
comments: false
description: ""
keywords: "Reverse"
---

1、zip加密暴力破解、字典破解

利用 **Ziperello** 来破解；

暴力破解是遍历密码来去破解，6位以下密码爆破速度很客观，这和机子性能有关。

![20161223191004.jpg](/assets/images/2016-12-16/1134880760.jpg)

基于字典的爆破有针对性，可以通过tips来构造密码，速度更快；

2、zip的伪加密

zip伪加密是在压缩源文件目录区的加密标志位做修改，进而再打开文件时识被别为加密压缩包而无法解密；

**50 4B** 这是zip文件头PK的hex，**50 4B 03 04** 是压缩源文件数据区；

而zip伪加密是在 **50 4B 01 02** 这里做的手脚，这是zip压缩源文件目录区，具体hex代表的含义看下面博文：

[http://blog.csdn.net/ETF6996/article/details/51946250](http://blog.csdn.net/ETF6996/article/details/51946250)

将下图圈圈的 **00 00** 改为 **09 00** 或者 **01 00** 即可完成伪加密；

![20161223192048.jpg](/assets/images/2016-12-16/200649707.jpg)

解密只需要找到 **50 4B 01 02**，在 **14 00** 后修改回 **00 00** 即可；

3、zip明文攻击

这是到目前为止最智能的一种攻击方法，详细原理解释自行谷歌；

大致原理就是你有一个需要解密的zip而且不知道密码，但你还有zip包里一个已知文件，将已知文件进行zip加密后和待解密的zip里已知文件进行hex对比，两者的区别就是zip加密的三个key；

实际操作一下，设置一个使用密码加密的zip压缩包，里面有已知的lut.jpg文件；

首先这里需要判断一下文件是否一致；

看大小，但最直观的是 **crc32** 值：

![20161223185613.jpg](/assets/images/2016-12-16/4235506473.jpg)

可见是相同的；

这里利用 **AZIP** 来破解；

![20161223201114.jpg](/assets/images/2016-12-16/743786134.jpg)

点击start，开始对比筛选key；

![20161223201617.jpg](/assets/images/2016-12-16/2887362317.jpg)

筛选很快，完成后会出现三个加密秘钥，点击后面导出，即可将加密的zip包另存为空白的zip包，搞定；

![20161223202457.jpg](/assets/images/2016-12-16/2246242956.jpg)

简单来说，zip明文攻击就是利用已知文件找加密秘钥，利用秘钥来解锁其他加密文文件；

因为zip压缩包里的所有文件都是使用同一个加密秘钥来加密的；
