---
layout: post
title: 《ATT&CK 手册》学习备忘录
description: ""
keywords: ""
---

项目多为Windows环境下的实际操作，原理介绍较少，对实战渗透有较大的参考价值。

项目地址：[https://github.com/Dm2333/ATTCK-PenTester-Book](https://github.com/Dm2333/ATTCK-PenTester-Book)

本备忘录仅补充学习思考内容。

### 一、Initial Access（入口点） 

1、水坑攻击：针对目标常访问的服务，而非直接目标。 

2、利用公开漏洞：厂商补丁公告、github diff 

3、外部远程服务：如果VPN等软件的登陆密码已保存但以星号显示、无小眼睛查看，可以将当前程序的进程内存dump下来，然后使用strings快速查找。* 可将密码后多加几位特殊符号，便于grep定位，* Windows下可使用procdump64.exe。 

4、渗透到其他网络介质：交换机、路由器、WAP、光猫 

5、硬件攻击：无线网卡，e.g Who Am I: No System Is Safe。 

6、通过可移动媒体进行复制：BadUSB是USB协议中的一个严重漏洞。 

7、鱼叉式钓鱼附件：宏病毒、远控木马 

8、鱼叉式钓鱼链接：重定向 

9、通过服务进行鱼叉式网络钓鱼：社工->取得信任 

10、供应链妥协：第三方恶意软件包，e.g 骗过PyPI的Python Package钓鱼。 

11、利用可靠关系：目标过分开放权限给三方，e.g Facebook数据泄露、欺骗IDC客服小姐姐。 

12、利用合法帐号：默认账户、弱口令、信息泄露 

13、近距离通讯攻击：大菠萝 

14、未知漏洞攻击 

### 二、Execution（命令执行）

1、远程动态数据交换：Metasploit、CobaltStrike、Empire

2、命令行界面：nc、socat

3-22、24、27-40、Windows下命令执行方法：vbs、CHM、CMSTP、CPL、Forfiles、IEExec、InfDefaultInstall、InstaIIUtil、MSHTA、MSIexec、Pcalua、Regsvcs/Regasm、regsvr32、Rundll32、Scripting、SyncAppvPublishingServer、Trusted Developer Utilities、Winword、XSL Script Processing、**PsExec**、DCOM、Powershell、SMBexec、**WinRM**、wmic、wlua、INF-SCT、Reflection.Assembly、msconfig、sigverif.exe、DXCap.exe、Register-cimprovider.exe、xls mimikatz、**VMI**，远程登录Windows Server并执行命令常用：IPC$+AT（445端口）、PSEXEC（445）、WMI（135）、WinRM（5985 HTTP &5986 HTTPS、在windows 2012才默认开启）。

23、25、本地任务调度，计划任务：crontab（Linux）、schtasks（Windows）、at（Windows）、sc（Windows）

26、用户图形化界面：mstsc（Windows）、rdesktop（Linux）、vnc

### 三、Persistence（持久化）

### 四、Privilege Escalation（权限提升）

### 五、Defense Evasion（绕过防御）

### 六、Credential Access（获取凭证）

### 七、Discovery（基础信息收集）

### 八、lateral-movement（横向渗透）

### 九、C&C（命令控制）

### 十、Exfiltration（信息窃取）